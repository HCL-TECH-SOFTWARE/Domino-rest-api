# DRAPI 1.1.3 Release Notes

!!! info "Summary"

    - Released: [insert release date]
    - [insert number] breaking changes
    - [insert number] fixes
    - [insert number] feature updates

## Feature updates

## Fixes

- Dependencies: Updated to vert.x 4.5.14
- CORS: fixed an issue where a CORS preflight on a non-existing path would return HTTP Status 204 instead of HTTP Status 404

## Breaking changes

### CORS is now using REGEX

[Browser based applications](../usingdominorestapi/keepapplications.md) that are hosted on a different host need [CORS](https://developer.mozilla.org/en-US/docs/Glossary/CORS) support. Until DRAPI v1.1.2 this was done providing a plain string, that a domain would need to end on. Starting with DRAPI v1.1.3 this is replaced with a [regular expression (REGEX)](https://en.wikipedia.org/wiki/Regular_expression)

Old:

```json
"CORS": {
    "localhost": true,
    ".local" : true
}
```

New:

```json
"CORS": {
    "^https?:\\/\\/localhost(?:\\:\\d+)?$": true,
     "^https?:\\/\\/.*\\.local(?:\\:\\d+)?$": true
  }
```

A few pointers:

- `^` -> beginning of the string
- `http` -> the literal string `http`
- `s?` -> optional the string `s`
- `\\/` -> double escape the string `/`
- `.*` -> one or more characters of any type
- `\\.` -> double escape the string `.`
- `(?:\\:\\d+)?` -> double escaped optional colon and port number
- `$` -> end of string

Note: inside JSON the `\` of Regex gets escaped to `\\`

This allows greater flexibility, but requires to update your CORS variable if you have made changes in `keepconfig.d` to your CORS configuration

Example: change `mycompany.com` to `https:\\/\\/.*\\.mycompany\.com:8000$` to allow only `https` on port `8000` for `mycompany.com`

!!! tip "Use a regex tool"

    Regex can be hard to decipher and understand due to their syntax and flexibility. To test if a Regex does what you want it to do, use an [online interactive tool](https://regex101.com/) for validation. Make sure to pick the Java flavour
